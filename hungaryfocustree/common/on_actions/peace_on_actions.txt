on_actions = {
	
on_daily_ALB = {	#Albania joins the war	
  effect = { 
    if = {
      limit = {
	    has_global_flag = gbw_albanian_revolution_failed
		
		SER = {
		has_war_with = BUL
		}
    }
	
	  add_ideas = PB_HUN_Great_Balkan_War
	
	  SER = {
	   add_to_faction = ALB
	}
	set_global_flag = gbw_albania_ni_joined_war
	clr_global_flag = gbw_albanian_revolution_failed
    }
  }	
}

on_daily_ALB = {	#Albania Capitulation	
  effect = { 
    if = {
      limit = {
	     NOT = {	  
          controls_province = 9914	   
          }

        has_global_flag = gbw_albania_ni_joined_war		  
       }
	
	leave_faction = yes
	white_peace = HUN
	white_peace = BUL
	white_peace = TUR
	remove_ideas = PB_HUN_Great_Balkan_War

    clr_global_flag = gbw_albania_ni_joined_war
    set_global_flag = gbw_albania_lost
	
	}
  }
}  
	
on_daily_HUN = {	#RomaniaCapitulation	
  effect = { 
    if = {
      limit = {
	  
        has_global_flag = gbw_romania_joins
		
        controls_province = 9617
        controls_province = 9716		  
    }
	
	
	ROM = {
	
    leave_faction = yes
	white_peace = HUN
	white_peace = BUL
	white_peace = TUR
	white_peace = ALB	
	remove_ideas = PB_HUN_Great_Balkan_War
	remove_ideas = ROM_russian_help	
	
	  }
	  
    clr_global_flag = gbw_romania_joins	  

    set_global_flag = gbw_romania_lost
	
	}
  }
}
 
on_daily_HUN = {	#SerbiaCapitulation
  effect = { 
    if = {
      limit = {
	  
        has_global_flag = gbw_serbia_joins
		
          controls_province = 11586
          controls_province = 11899
          controls_province = 3882		  
    }
	
	SER = {
	
    leave_faction = yes
	white_peace = HUN
	white_peace = BUL
	white_peace = TUR
	white_peace = ALB
	remove_ideas = PB_HUN_Great_Balkan_War
	remove_ideas = ROM_russian_help		
	
	  }

    clr_global_flag = gbw_serbia_joins	
    set_global_flag = gbw_serbia_lost
	
	}
  }
}  

on_daily_HUN = {	#GreeceCapitulation
  effect = { 
    if = {
      limit = {
	  
        has_global_flag = gbw_greece_joins
		
          controls_province = 9833
          controls_province = 4122
          controls_province = 10038		  
    }
	
	GRE = {
	
    leave_faction = yes
	white_peace = HUN
	white_peace = BUL	
	remove_ideas = PB_HUN_Great_Balkan_War
	remove_ideas = ROM_russian_help		
	
	  }

    clr_global_flag = gbw_greece_joins
    set_global_flag = gbw_greece_lost
	
	}
  }
}

on_daily_HUN = {	#HungaryCapitulation
  effect = { 
    if = {
      limit = {

	   has_global_flag = gbw_hungary_joins
	   
	    NOT = {	  
       controls_province = 9660
       controls_province = 3617
       controls_province = 11691
       controls_province = 11659	   
    }
  }
	
	HUN = {
	
    leave_faction = yes
	white_peace = SER
	white_peace = ROM
	white_peace = GRE	
	remove_ideas = PB_HUN_Great_Balkan_War
    remove_ideas = HUN_great_patriotic_war	
	
	  }
	  
	clr_global_flag = gbw_hungary_joins
    set_global_flag = gbw_hungary_lost
	
	    }
      }
    }
  
on_daily_BUL = {	#BulgariaCapitulation
  effect = { 
    if = {
      limit = {

	   has_global_flag = gbw_bulgaria_joins
	   
	    NOT = {	  
       controls_province = 3796
       controls_province = 949
       controls_province = 6923	   
    }
 }
	
	BUL = {
	
    leave_faction = yes
	white_peace = SER
	white_peace = ROM
	white_peace = GRE	
	remove_ideas = PB_HUN_Great_Balkan_War	
	
	  }
	  
	clr_global_flag = gbw_bulgaria_joins
    set_global_flag = gbw_bulgaria_lost
	
	    }
      }
    }
	
on_daily_TUR = {	#TurkeyCapitulation
  effect = { 
    if = {
      limit = {

	   has_global_flag = gbw_turkey_joins
	   
	    NOT = {	  
       controls_province = 11747
       controls_province = 1005
       controls_province = 11746	   
    }
 }
	
	TUR = {
	
    leave_faction = yes
	white_peace = SER
	white_peace = ROM
	white_peace = GRE	
	remove_ideas = PB_HUN_Great_Balkan_War
    remove_ideas = TUR_Liberation_War	
	
	  }
	  
    clr_global_flag = gbw_turkey_joins
    set_global_flag = gbw_turkey_lost
	
	    }
      }
    }	

on_daily_HUN = {	#HungaryWonPeace
  effect = { 
    if = {
      limit = { 
	    has_global_flag = gbw_romania_lost
	    has_global_flag = gbw_serbia_lost
	    has_global_flag = gbw_greece_lost		
    }
	
		every_country = {
		  set_temp_variable = { super_id = 80 }
			PB_Fire_Super_Event = yes
		}
		
		news_event = {
			id = PBNews.23
			hours = 1 
		}		
		
		   set_global_flag = gbw_hungary_won
		
		   clr_global_flag = great_balk_war
		   
	       clr_global_flag = gbw_romania_lost
	       clr_global_flag = gbw_serbia_lost
	       clr_global_flag = gbw_greece_lost
           clr_global_flag = gbw_turkey_joins
           clr_global_flag = gbw_hungary_joins
           clr_global_flag = gbw_bulgaria_joins		   
		   
	 	   country_event = { id = balkwarpeace.1}
           country_event = { id = balkwarpeace.3}		   
	    }
      }
    }
	
on_daily_SER = {	#SerbiaWonPeace
  effect = { 
    if = {
      limit = { 
	    has_global_flag = gbw_bulgaria_lost
	    has_global_flag = gbw_serbia_lost
	    has_global_flag = gbw_turkey_lost		
    }
	
		every_country = {
		  set_temp_variable = { super_id = 81 }
			PB_Fire_Super_Event = yes
		}
		
		news_event = {
			id = PBNews.24
			hours = 1
		}		
		
		RUS = {
		
set_autonomy = {
	target = ROM
	autonomous_state = autonomy_PB_Imperial_Autonomy
	freedom_level = 0.3
   }
 }
 
		  set_global_flag = gbw_serbia_won
 
		  clr_global_flag = great_balk_war
		   
	      clr_global_flag = gbw_bulgaria_lost
	      clr_global_flag = gbw_serbia_lost
	      clr_global_flag = gbw_turkey_lost
		  
          clr_global_flag = gbw_greece_joins
          clr_global_flag = gbw_romania_joins
          clr_global_flag = gbw_serbia_joins
		  
		   
	 	  country_event = { id = balkwarpeace.6}		   
	    }
      }
    }

on_daily_HUN = {	# Third Balkan War - Bulgaria Capitulation	
  effect = { 
    if = {
      limit = {
	  
	    has_global_flag = third_balkan_war_started
		
          controls_province = 9617
          controls_province = 9716		  
    }
	
	country_event = { id = hungarian.15}

    set_global_flag = third_balkan_war_bulgaria_lost
	
	      }
       }
    }

on_daily_HUN = {	# Third Balkan War - Albania Capitulation	
  effect = { 
    if = {
      limit = {
	  
	    has_global_flag = third_balkan_war_started
		
          controls_province = 9617		  
    }
	
	country_event = { id = hungarian.57}

    set_global_flag = third_balkan_war_albania_lost
	
	      }
       }
    }

on_daily_HUN = {	# Third Balkan War - Greece Capitulation	
  effect = { 
    if = {
      limit = {

	    has_global_flag = third_balkan_war_started
		
          controls_province = 9617		  
    }

    set_global_flag = third_balkan_war_greece_lost
	
	      }
       }
    }

on_daily_HUN = {	# Third Balkan War - Final Peace Deal
  effect = { 
    if = {
      limit = { 
	    has_global_flag = third_balkan_war_bulgaria_lost
	    has_global_flag = third_balkan_war_greece_lost	
    }
 
		  set_global_flag = third_balkan_war_hungary_win
 
		  clr_global_flag = third_balkan_war_started
		   
	      clr_global_flag = third_balkan_war_bulgaria_lost
	      clr_global_flag = third_balkan_war_greece_lost		   
		   
	 	  country_event = { id = hungarian.58}	
		  
	      }
       }
    }

on_daily_HUN = {	# Hungarian civil war - start
  effect = { 
    if = {
      limit = { 
	    NOT = {
        has_completed_focus = hun_Country_held_on

        owns_state = 70
        owns_state = 73		
       }
    }
 
        declare_war_on = {
        target = SLO
        type = annex_everything
             }

        declare_war_on = {
        target = RUT
        type = annex_everything
             }			 
	      }
       }
    }

on_daily_HUN = {	# Hungarian civil war - Slovakia Capitulation
  effect = { 
    if = {
      limit = { 
	    NOT = {
        owns_state = 70	
       }
	   SLO = {
       has_capitulated = yes
       }	   
    }
	   transfer_state = 71
	   transfer_state = 70   
	      }
       }
    }

on_daily_HUN = {	# Hungarian civil war - Ruthenia Capitulation
  effect = { 
    if = {
      limit = { 
	    NOT = {
        owns_state = 73	
       }
	   RUT = {
       has_capitulated = yes
       }	   
    }
	   transfer_state = 73

	   { country_event = { id = hungarian.70 days = 7 } }	   
	      }
       }
    }	
 } 